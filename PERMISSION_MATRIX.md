# 게시판 접근 권한 매트릭스 📊

## 부서별 게시판 접근 권한 표

| 부서/역할 | 학술정보 | 정책동향 | 짧은 생각 | 사회서비스원 | 노인보호전문기관 |
|----------|---------|---------|---------|------------|---------------|
| **경기북서부노인보호전문기관** | ✅ | ✅ | ✅ | ✅ | ✅ **전용** |
| **경기북부노인보호전문기관** | ✅ | ✅ | ✅ | ✅ | ❌ |
| **경기동부노인보호전문기관** | ✅ | ✅ | ✅ | ✅ | ❌ |
| **경기서부노인보호전문기관** | ✅ | ✅ | ✅ | ✅ | ❌ |
| **경기남부노인보호전문기관** | ✅ | ✅ | ✅ | ✅ | ❌ |
| **경기북동부노인보호전문기관** | ✅ | ✅ | ✅ | ✅ | ❌ |
| **기획예산팀** | ✅ | ✅ | ✅ | ✅ | ❌ |
| **경영지원팀** | ✅ | ✅ | ✅ | ✅ | ❌ |
| **기타 모든 부서** | ✅ | ✅ | ✅ | ✅ | ❌ |
| **관리자 (admin)** | ✅ | ✅ | ✅ | ✅ | ✅ **전체** |

---

## 게시판별 접근 정책

### 1. 📚 학술정보 (`/academy`)
- **접근 권한**: 전체 직원
- **접근 레벨**: `public`
- **설명**: 모든 경기도사회서비스원 직원이 열람 가능

### 2. 📋 정책동향 (`/policy`)
- **접근 권한**: 전체 직원
- **접근 레벨**: `public`
- **설명**: 모든 경기도사회서비스원 직원이 열람 가능

### 3. 💭 짧은 생각 (`/thoughts`)
- **접근 권한**: 전체 직원
- **접근 레벨**: `public`
- **설명**: 모든 경기도사회서비스원 직원이 열람 가능

### 4. 🏢 사회서비스원 (`/social-service`)
- **접근 권한**: 전체 직원
- **접근 레벨**: `public`
- **설명**: 모든 경기도사회서비스원 직원이 열람 가능

### 5. 🔒 노인보호전문기관 (`/elder-protection`)
- **접근 권한**: 경기북서부노인보호전문기관 + 관리자
- **접근 레벨**: `department_only`
- **허용 부서**: `['경기북서부노인보호전문기관']`
- **설명**: **경기북서부노인보호전문기관 직원만** 열람 가능 (관리자 예외)

---

## API 엔드포인트별 접근 제한

| API 엔드포인트 | 인증 필요 | 권한 확인 | 설명 |
|--------------|---------|---------|------|
| `GET /api/academy` | ✅ | ❌ (전체) | 학술정보 조회 |
| `GET /api/policy` | ✅ | ❌ (전체) | 정책동향 조회 |
| `GET /api/social-service` | ✅ | ❌ (전체) | 사회서비스원 조회 |
| `GET /api/elder-protection` | ✅ | ✅ **부서 검증** | 노인보호전문기관 조회 |
| `POST /api/elder-protection` | ✅ | ✅ **관리자만** | 노인보호전문기관 글 작성 |

---

## 접근 시나리오 예시

### ✅ 시나리오 A: 경기북서부노인보호전문기관 직원

```
사용자: kim.worker@gg.pass.or.kr
부서: 경기북서부노인보호전문기관
역할: user

접근 가능:
- ✅ /academy (학술정보)
- ✅ /policy (정책동향)
- ✅ /thoughts (짧은 생각)
- ✅ /social-service (사회서비스원)
- ✅ /elder-protection (노인보호전문기관) ← 전용 게시판

접근 불가:
- (없음)
```

### ❌ 시나리오 B: 경기북부노인보호전문기관 직원

```
사용자: lee.worker@gg.pass.or.kr
부서: 경기북부노인보호전문기관
역할: user

접근 가능:
- ✅ /academy (학술정보)
- ✅ /policy (정책동향)
- ✅ /thoughts (짧은 생각)
- ✅ /social-service (사회서비스원)

접근 불가:
- ❌ /elder-protection (노인보호전문기관)
  → 오류: "경기북서부노인보호전문기관 직원만 접근 가능합니다."
```

### ✅ 시나리오 C: 관리자

```
사용자: admin@gg.pass.or.kr
부서: 기획예산팀
역할: admin

접근 가능:
- ✅ /academy (학술정보)
- ✅ /policy (정책동향)
- ✅ /thoughts (짧은 생각)
- ✅ /social-service (사회서비스원)
- ✅ /elder-protection (노인보호전문기관) ← 관리자 특권

접근 불가:
- (없음 - 관리자는 모든 게시판 접근 가능)
```

---

## 권한 검증 로직

### 코드 예시: 노인보호전문기관 접근 확인

```typescript
export function hasElderProtectionAccess(user: AuthUser): boolean {
  const ELDER_PROTECTION_DEPARTMENT = '경기북서부노인보호전문기관';
  
  // 관리자는 접근 가능
  if (user.role === 'admin') {
    return true;
  }

  // 경기북서부노인보호전문기관 직원만 접근 가능
  return user.department_name === ELDER_PROTECTION_DEPARTMENT;
}
```

---

## 향후 확장 계획

### 다른 노인보호전문기관 게시판 추가 가능

각 노인보호전문기관별로 별도의 전용 게시판 생성 가능:

| 게시판 | 접근 권한 | 경로 |
|--------|----------|------|
| 경기북서부노인보호전문기관 | 해당 기관 직원 + 관리자 | `/elder-protection` (✅ 구현) |
| 경기북부노인보호전문기관 | 해당 기관 직원 + 관리자 | `/elder-protection-north` (예정) |
| 경기동부노인보호전문기관 | 해당 기관 직원 + 관리자 | `/elder-protection-east` (예정) |
| 경기서부노인보호전문기관 | 해당 기관 직원 + 관리자 | `/elder-protection-west` (예정) |
| 경기남부노인보호전문기관 | 해당 기관 직원 + 관리자 | `/elder-protection-south` (예정) |
| 경기북동부노인보호전문기관 | 해당 기관 직원 + 관리자 | `/elder-protection-northeast` (예정) |

---

## 보안 등급

| 등급 | 설명 | 적용 게시판 |
|------|------|------------|
| 🟢 **Public** | 모든 직원 접근 가능 | 학술정보, 정책동향, 짧은 생각, 사회서비스원 |
| 🔴 **Department Only** | 특정 부서만 접근 가능 | 노인보호전문기관 |
| 🔵 **Admin Only** | 관리자만 접근 가능 | (관리 기능) |

---

**최종 업데이트**: 2025-12-25  
**버전**: 1.0.0  
**상태**: ✅ 구현 완료
